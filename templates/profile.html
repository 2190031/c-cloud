{% extends 'logged.base.html' %}
{% block title %}{{ title }}{% endblock %}
{% block content %}

<div class="d-flex flex-column flex-lg-row h-lg-full bg-surface-secondary">

    <!-- Main content -->
    <div class="h-screen flex-grow-1 overflow-y-lg-auto">
        <!-- Header -->
        <header class="bg-surface-primary m-3 pt-6">
            <div class="container-fluid">
                <div class="mb-npx">
                    <div class="row align-items-center">
                        <div class="col-sm-6 col-12 mb-4 mb-sm-0">
                            <!-- Title -->
                            <h1 class="h2 mb-0 ls-tight">Ajustes de Perfil</h1>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- Main -->
        <main class="py-6 bg-surface-secondary overflow-y-scroll">
            <div class="container-fluid overflow-y-scroll">
                <div class="row shadow overflow-y-scroll">
                    <div class="col-xl-10 mx-auto">
                        <!-- Profile picture -->
                        <div class="card shadow-lg border-0 mt-4 mb-10 border-light-subtle text-bg-dark"
                            data-bs-theme="dark">
                            <div class="card-body mb-0">
                                <div class="d-flex align-items-center">
                                    <div>
                                        <div class="d-flex align-items-center">
                                            <a href="#" class="avatar avatar-lg bg-warning rounded-circle text-white">
                                                <!-- <img alt="..." width="90px" class="rounded-pill" id="profile-picture-display"> -->
                                                {% if "google_picture" in session %}
                                                    <img src="{{session['google_picture']}}" alt="" height="90" class="rounded-pill">
                                                {% else %}
                                                    <img alt="" width="90" height="90" class="rounded-pill" id="profile-picture-display">
                                                {% endif %}
                                                <!-- Enviar la imagen por variable de url desde la carpeta -->
                                            </a>
                                            <div class="ms-4">
                                                <span class="h4 d-block mb-0">{{ user_info.name }} {{ user_info.surname
                                                    }}</span>
                                                <a href="#" class="text-sm font-semibold text-muted">View Profile</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ms-auto">
                                        <input type="file" name="profile-picture" id="upload" accept="image/*" hidden>
                                        <label for="upload" class="btn btn-sm btn-neutral">Choose file</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Form -->
                        <div class="mb-3 mt-2">
                            <h5 class="mb-0">Datos personales</h5>
                            <small>Se unió el: {{ user_info.creationdate }}</small>
                        </div>
                        <form class="mb-6" data-bs-theme="dark">
                            <div class="row mb-5">
                                <div class="col-md-6">
                                    <div class="">
                                        <label class="form-label" for="firstname">Nombre</label>
                                        <input type="text" class="form-control" id="firstname" name="firstname"
                                            placeholder="Nombre" value="{{ user_info.name }}" data-bs-theme="dark">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="">
                                        <label class="form-label" for="surname">Apellido</label>
                                        <input type="text" class="form-control" id="surname" name="surname"
                                            placeholder="Apellido" value="{{ user_info.surname }}">
                                    </div>
                                </div>
                            </div>
                            <div class="row g-5">
                                <div class="col-md-6">
                                    <div class="">
                                        <label class="form-label" for="email">Email</label>
                                        <input type="email" class="form-control" id="email" name="email"
                                            placeholder="Correo" value="{{ user_info.email }}" readonly>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="">
                                        <label class="form-label" for="username">Usuario</label>
                                        <input type="text" class="form-control" id="username" name="username"
                                            placeholder="Usuario" value="{{ user_info.username }}">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="">
                                        <label class="form-label" for="new-password">Nueva contraseña</label>
                                        <input type="password" class="form-control" id="new-password"
                                            name="new-password" placeholder="Nueva contraseña">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="">
                                        <label class="form-label" for="repeat-password">Repetir nueva contraseña</label>
                                        <input type="password" class="form-control" id="repeat-password"
                                            name="repeat-password" placeholder="Repetir nueva contraseña">
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="text-end">
                                <button type="button" class="btn btn-sm btn-neutral me-2">Cancelar</button>
                                <button type="button" class="btn btn-sm btn-primary" id="update-data-btn"
                                    data-bs-toggle="modal" data-bs-target="#auth-update">Guardar</button>
                            </div>
                        </form>
                        <hr class="my-10" />
                        <!-- Individual switch cards -->
                        <div class="row g-6" data-bs-theme="dark">
                            <div class="col-md-12">
                                <div class="card shadow border-0">
                                    <div class="card-body d-flex align-items-center">
                                        <div>
                                            <h5 class="text-danger mb-2">Deactivate account</h5>
                                            <p class="text-sm text-muted">
                                                Once you delete your account, there is no going back. Please be certain.
                                            </p>
                                        </div>
                                        <div class="ms-auto">
                                            <button type="button" class="btn btn-sm btn-danger">Deactivate</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="auth-update" aria-labelledby="auth" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content rounded-4 shadow bg-dark text-light" data-bs-theme="dark">
            <div class="modal-header border-bottom-0" data-bs-theme="dark">
                <h1 class="modal-title fs-5">Confirmar cambios</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body py-0">
                <p>Para confirmar debe escribir su correo electrónico y contraseña actual.</p>
                <p class="text-warning"><i>* Estos cambios no podrán deshacerse</i></p>
                <div class="row">
                    <div class="p-2 col-10 mx-auto">
                        <label for="ver-email">Correo</label>
                        <input type="email" name="ver-email" id="ver-email" class="form-control" placeholder="Correo"
                            required>
                    </div>
                    <div class="p-2 col-10 mx-auto">
                        <label for="ver-password">Contraseña</label>
                        <input type="password" name="ver-password" id="ver-password" class="form-control"
                            placeholder="Contraseña" required>
                    </div>
                </div>
            </div>
            <div class="modal-footer flex-column align-items-stretch w-100 gap-2 pb-3 border-top-0">
                <button type="button" class="btn btn-lg btn-primary" data-bs-dismiss="modal"
                    id="confirm-update-btn">Confirmar</button>
                <button type="button" class="btn btn-lg btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="auth-deactivate" aria-labelledby="auth" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content rounded-4 shadow bg-dark text-light" data-bs-theme="dark">
            <div class="modal-header border-bottom-0" data-bs-theme="dark">
                <h1 class="modal-title fs-5">Confirmar desactivación</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body py-0">
                <p>Para confirmar debe escribir su correo electrónico y contraseña actual.</p>
                <p class="text-warning"><i>* Esta acción no podrá deshacerse</i></p>
                <div class="row">
                    <div class="p-2 col-10 mx-auto">
                        <label for="ver-deact-email">Correo</label>
                        <input type="email" name="ver-deact-email" id="ver-deact-email" class="form-control" placeholder="Correo"
                            required>
                    </div>
                    <div class="p-2 col-10 mx-auto">
                        <label for="ver-deact-password">Contraseña</label>
                        <input type="password" name="ver-deact-password" id="ver-deact-password" class="form-control"
                            placeholder="Contraseña" required>
                    </div>
                </div>
            </div>
            <div class="modal-footer flex-column align-items-stretch w-100 gap-2 pb-3 border-top-0">
                <button type="button" class="btn btn-lg btn-primary" data-bs-dismiss="modal"
                    id="confirm-deact-btn">Confirmar</button>
                <button type="button" class="btn btn-lg btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="auth-" tabindex="-1" aria-labelledby="Commands" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-light">
            <div class="modal-header" data-bs-theme="dark">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Confirmar cambio</h1>
                <button type="button" class="btn-close text-light" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}
{% block script %}
<script src="{{ url_for('static', filename='public/js/profile.js') }}"></script>
<!-- <script src="{{ url_for('static', filename='public/js/profile_pic.js') }}"></script> -->
{% endblock %}